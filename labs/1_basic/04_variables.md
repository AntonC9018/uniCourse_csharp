# Лабораторная работа 4

- Тема: **Базовое взаимодействие с памятью через переменные**.
- [Видео](https://www.youtube.com/watch?v=wjsV9CvZfGI&list=PL4sUOB8DjVlVVw9Yx_tUO7fRPDYeaACXD&index=3)

## Концепты

- Память: стек (временная), хип (динамическая)
- Переменная как абстракция для ячейки памяти
- Операции с переменными (считать, вписать)
- Значение
- Объект
- Адрес памяти
- Ссылка (адрес памяти объекта)
- Типы данных
- Тип-значение и ссылочный тип
- Выражение (есть больше об этом в следующей теме)

## Задания

Объясните, что произойдет в следующих отрезках кода:
- какие выполнятся инструкции и как,
- сколько ячеек памяти выделится во временной памяти,
- какое значение куда запишется,
- сколько объектов выделится в динамической памяти,
- что будет в переменных по итогу выполнения программы,
- что напечатается в консоль.

Также, запустите данный код, чтобы убедится в правильности вашей логики.

1. ```csharp
   int a = 5;
   int b = 6;
   a = b;
   b = 7;
   Console.WriteLine(a);
   ```
   <details>
   <summary>Правильный ответ:</summary>

   В `a` запишется 6 на 3-ей строчке.
   Запись в `b` 7 на 4-ой строчке не влияет на ячейку памяти переменной `a`.
   
   Важно помнить, что инструкции выполнятся по очереди, сверху вниз.

   Также важно помнить, что ячейку нельзя связать с другой ячейкой по имени.
   `a = b` копирует из ячейки `b` в ячейку `a`.
   Это одноразовое действие, они не будут связаны после выполнения этой строчки.
   Как бы вы не влияли на `b` после этого, это не отразится в `a`.
   </details>

2. ```csharp
   int a = 5;
   int b = a + 6;
   a = 7;
   Console.WriteLine(b);
   ```
   <details>
   <summary>Правильный ответ:</summary>
   
   На строчке 2 в `b` записывается *результат выражения* с правой части присваивания (`a + 6`).
   Вычисление результата этого выражения означает его превращение в одно *значение*.
   
   `a + 6` -> `5 + 6` -> `11`
   
   Результатом вычисления выражения является значение 11, которое и будет записано в ячейку `b`.
   
   Дальнейшее изменение `a` не влияет на предыдущую операцию, поскольку ее *результат* уже был сохранен в `b`.
   </details>

3. ```csharp
   string a = "1";
   string b = a;
   a = "2";
   Console.WriteLine(a);
   Console.WriteLine(b);
   ```
   <details>
   <summary>Правильный ответ:</summary>

   `string a = "1";` делает 3 вещи:
   - Создает ячейку памяти для `a` во временной памяти;
   - Создает объект в динамической памяти с представлением строки `"1"`;
   - Сохраняет в ячейку памяти для `a` адрес объекта строки (ссылка на строку) в динамической памяти `"1"`.
   
   На 2-й строчке в новую ячейку `b` попадает результат выражения `a` 
   (адрес объекта строки `"1"` в динамической памяти).

   Строка `a = "2"` перезаписывает *ссылку*, хранящуюся в `a`, а не *значение в объекте по адресу* из `a`,
   на адрес свежесозданного объекта строки `"2"`.
   Следовательно, это не повлияет на значение по ссылке из `b` 
   (то есть не сменит `"1"` на `"2"` в объекте строки `"1"`).
   
   По итогу в `a` будет ссылка на объект `"2"`, а в `b` будет ссылка на объект `"1"`.
   </details>
   
4. ```csharp
   string a = 5;
   ```
   
   <details>
   <summary>Правильный ответ:</summary>
   
   Несовместимость типов: в `a` можно сохранять только ссылки на строки, а мы пытаемся сохранить там число.
   </details>

4. ```csharp
   int a = 5;
   int a = 6;
   ```
   
   <details>
   <summary>Правильный ответ:</summary>
   
   Этот код не скомпилируется, потому что невозможно 
   переопределить переменную с тем же именем.
   </details>
