# Лабораторная работа 3

- Тема: **Builder**.
- [Видео 1](https://www.youtube.com/watch?v=3L4SSnZ7cp0&list=PL4sUOB8DjVlXKTknA5IW75BGwcTw6PU3r&index=4)
- Видео 2 будет позже

## Концепты

Видео 1:
- Инициализация объекта в один этап
- Инициализация объекта поэтапно
- Immutable модели, их преимущества (избежание копий, гарантия неизменяемости) 
  и недостатки (возможно выделение лишней памяти, изменение требует воссоздания)
- Mutable модели в контексте билдера
- Создание имплементации согласно интерфейсу
- Избежание инкапсуляции на уровне mutable моделей, инкапсуляция на уровне другого класса
- Инкапсуляция настройки и создания объекта, используя методы
- Использование паттерна scope для распределения настроек на несколько объектов 
- Валидация объектов

Видео 2 (пока нет):
- Идентификаторы объектов
- Использование интерфейсов для удаление повторяющегося кода
- Техника fluent builder
- Техника делегата конфигурации
- Абстрактные билдеры

## Задания

- Создайте группу взаимосвязанных классов объектов на вашу тематику.
  Должны существовать как минимум mutable модели для билдера,
  immutable модели создавайте, если они будут задуманы на выходе билдера.
  Разрешается использовать на выходе, например, XML файл вместо группы объектов, 
  тогда отдельные immutable модели не обязательны.

- Создайте классы билдеров для всей группы классов.
  Через билдер возможно выставить каждое свойство объектов,
  а так же инициализировать их immutable версии, когда процесс инициализации завершен.

- Добавьте код для валидации создаваемых объектов в функцию их создания.
  Добавьте базовую валидацию на уровне методов или свойств, инкапсулирующих поля mutable модели (на уровне модели, или на уровне билдера).

- Используйте их в коде основной функции.


Задания (3 на выбор):

- Реализуйте более высокоуровневые функции конфигурации, которым необходим доступ к модели.

  Например, задача нескольких полей разом, 
  копирование некоторых данных из другого объекта билдера.

  Можно в билдере дать доступ не к каждому полю по отдельности,
  а где-то дать доступ только к 2 полям за раз, если их связывает общее правило.
  Инкапсулируйте это общее правило там.

  <!-- Например, можете создать систему поиска по фамилии среди объектов билдера,
  а в случае ее использования, не давайте сменить фамилию после создания.
  В этом случае, инкапсуляция будет на уровне билдера 
  (можно создать второй билдер под это, или добавить условий в изначальный).

  Можете добавить игнорирование диакритиков, а если идет поиск объекта по фамилии c диакритиками,
  чтобы она обновлялась в случае, когда на оригинале она без диакритиков. -->

- Реализуйте unit test-ы для всего функционала, используя фреймворк.
  Используйте snapshot test-ы.

- Реализуйте fluent builder, используйте делегаты конфигурации, 
  реализуйте паттерн scope для группирования общих данных последующих объектов.

- Улучшите систему валидации, добавив указание строчки кода где был создан объект.
  Выводите ошибки для всех объектов с проблемами, а не только для первого.

- Используйте что-то вроде базы данных как выходную структуру.
  Удалите прямые сслыки из объектов друг на друга и сделайте ссылки через идентификаторы.

- Создайте билдер под сохранение данных в базу данных.
  Его вывод могут быть или запросы SQL необходимые для сохранения объектов,
  или модели объектов для базы данных, с сохранением через ORM (типа EF Core).

- Создайте абстрактный билдер, и как минимум 2 разные его иплементации, 
  который будет инициализировать разные объекты, по разным правилам.
  Например, сделайте возможным смену правил валидации, а также смену того, как хранятся данные в выходной структурe:
  другая группировка в родительском объекте (адреса хранятся в домах, или характеристики домов доступны в словаре по адресу),
  с или без использования идентификаторов,
  под разный формат документа (XML или JSON).

  Если делаете через ту же модель, можно сделать возможныи сконфигурировать функцию создания вместо создания интерфейса на весь билдер.

  Можете так же придумать какую-то характеристику, которая доступна только одному из типов билдера,
  в котором случае придется делать разные модели под разные билдеры, и полную их имплементацию заново.
  В этом случае, инапсуляцию можно вынести в extension методы вне того или иного билдера, 
  определенные под их общий интерфейс.
